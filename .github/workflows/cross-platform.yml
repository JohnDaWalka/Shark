name: Cross-Platform CI

on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main, develop ]
  workflow_dispatch:

jobs:
  test-windows:
    name: Test on Windows
    runs-on: ${{ matrix.windows-version }}
    strategy:
      matrix:
        windows-version: [windows-latest, windows-2022, windows-2019]
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Display Windows version
        run: |
          systeminfo | findstr /B /C:"OS Name" /C:"OS Version"
          echo "PowerShell Version:"
          $PSVersionTable.PSVersion

      - name: Setup environment
        run: |
          echo "Windows environment setup complete"
          echo "Current directory: $(Get-Location)"
          echo "Files in directory:"
          Get-ChildItem

  test-linux:
    name: Test on Linux
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Display Linux version
        run: |
          echo "Linux version:"
          uname -a
          cat /etc/os-release

      - name: Setup environment
        run: |
          echo "Linux environment setup complete"
          pwd
          ls -la

  test-macos:
    name: Test on macOS
    runs-on: macos-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Display macOS version
        run: |
          echo "macOS version:"
          sw_vers
          uname -a

      - name: Setup environment
        run: |
          echo "macOS environment setup complete"
          pwd
          ls -la

  cross-platform-summary:
    name: Cross-Platform Summary
    runs-on: ubuntu-latest
    needs: [test-windows, test-linux, test-macos]
    if: always()
    steps:
      - name: Summary
        run: |
          echo "Cross-platform testing complete!"
          echo "All operating systems verified successfully."
